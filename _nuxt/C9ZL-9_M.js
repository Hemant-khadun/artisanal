import{e as j,K as F,L,M as P,r as m,E,b as N,o as H,f as k,n as _,l as i,p as M,u as h,N as I,O as U,P as q,H as O,Q,m as X,j as G,I as J,T as W,R as Y}from"./B5_BuWJT.js";const Z=["disabled"],ee=["disabled"],te={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"size-4 text-gray-300"},ae={class:"pointer-events-none absolute inset-0 flex items-center rounded-full"},le=j({__name:"VanishingInput",props:F({placeholders:{default:()=>["Placeholder 1","Placeholder 2","Placeholder 3"]}},{modelValue:{default:""},modelModifiers:{}}),emits:F(["submit","change"],["update:modelValue"]),setup(z,{emit:T}){const l=L(z,"modelValue"),S=T,x=P("canvasRef"),v=P("inputRef"),g=m(0),r=m(!1),c=m(null),d=m([]),y=m(null),$=z;E(()=>{v.value.focus()});function R(){c.value=window.setInterval(()=>{g.value=(g.value+1)%$.placeholders.length},3e3)}function D(){document.visibilityState!=="visible"&&c.value?(clearInterval(c.value),c.value=null):document.visibilityState==="visible"&&R()}function B(){if(!v.value||!x.value)return;const t=x.value,e=t.getContext("2d");if(!e)return;const a=getComputedStyle(v.value);t.width=800,t.height=800,e.clearRect(0,0,800,800);const b=parseFloat(a.getPropertyValue("font-size"));e.font=`${b*2}px ${a.fontFamily}`,e.fillStyle="#FFF",e.fillText(l.value,16,40);const s=e.getImageData(0,0,800,800).data,p=[];for(let o=0;o<800;o++){let w=4*o*800;for(let f=0;f<800;f++){let u=w+4*f;s[u]!==0&&s[u+1]!==0&&s[u+2]!==0&&p.push({x:f,y:o,color:`rgba(${s[u]}, ${s[u+1]}, ${s[u+2]}, ${s[u+3]})`})}}d.value=p.map(({x:o,y:w,color:f})=>({x:o,y:w,r:1,color:f}))}function V(t=0){y.value=requestAnimationFrame(()=>{var b;const e=[];for(const n of d.value)if(n.x<t)e.push(n);else{if(n.r<=0){n.r=0;continue}n.x+=Math.random()>.5?1:-1,n.y+=Math.random()>.5?1:-1,n.r-=.05*Math.random(),e.push(n)}d.value=e;const a=(b=x.value)==null?void 0:b.getContext("2d");a&&(a.clearRect(t,0,800,800),d.value.forEach(({x:n,y:s,r:p,color:o})=>{n>t&&(a.beginPath(),a.rect(n,s,p,p),a.fillStyle=o,a.strokeStyle=o,a.stroke())})),d.value.length>0?V(t-8):(l.value="",r.value=!1,setTimeout(()=>{v.value.focus()},100))})}function A(t){t.key==="Enter"&&!r.value&&C()}function C(){if(r.value=!0,B(),l.value){const t=Math.max(...d.value.map(({x:e})=>e));V(t),S("submit",l.value)}}function K(){C()}return N(l,t=>{r.value||S("change",{target:{value:t}})}),E(()=>{R(),document.addEventListener("visibilitychange",D)}),H(()=>{c.value&&clearInterval(c.value),y.value&&cancelAnimationFrame(y.value),document.removeEventListener("visibilitychange",D)}),(t,e)=>(k(),_("form",{class:M(["relative mx-auto h-12 w-full max-w-xl overflow-hidden rounded-full bg-white shadow-[0px_2px_3px_-1px_rgba(0,0,0,0.1),_0px_1px_0px_0px_rgba(25,28,33,0.02),_0px_0px_0px_1px_rgba(25,28,33,0.08)] transition duration-200 dark:bg-zinc-800",l.value&&"bg-gray-50"]),onSubmit:Y(K,["prevent"])},[i("canvas",{ref_key:"canvasRef",ref:x,class:M(["pointer-events-none absolute left-2 top-[20%] origin-top-left scale-50 pr-20 text-base invert sm:left-8 dark:invert-0",h(r)?"opacity-100":"opacity-0"])},null,2),I(i("input",{ref_key:"inputRef",ref:v,"onUpdate:modelValue":e[0]||(e[0]=a=>l.value=a),disabled:h(r),type:"text",class:M(["relative z-50 size-full rounded-full border-none bg-transparent pl-4 pr-20 text-sm text-black focus:outline-none focus:ring-0 sm:pl-10 sm:text-base dark:text-white",{"text-transparent dark:text-transparent":h(r)}]),onKeydown:q(A,["enter"])},null,42,Z),[[U,l.value]]),i("button",{disabled:!l.value,type:"submit",class:"absolute right-2 top-1/2 z-50 flex size-8 -translate-y-1/2 items-center justify-center rounded-full bg-black transition duration-200 disabled:bg-gray-100 dark:bg-zinc-900 dark:disabled:bg-zinc-700"},[(k(),_("svg",te,[e[1]||(e[1]=i("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"},null,-1)),i("path",{d:"M5 12l14 0",style:O({strokeDasharray:"50%",strokeDashoffset:l.value?"0":"50%",transition:"stroke-dashoffset 0.3s linear"})},null,4),e[2]||(e[2]=i("path",{d:"M13 18l6 -6"},null,-1)),e[3]||(e[3]=i("path",{d:"M13 6l6 6"},null,-1))]))],8,ee),i("div",ae,[I(X(W,{mode:"out-in","enter-active-class":"transition duration-300 ease-out","leave-active-class":"transition duration-300 ease-in","enter-from-class":"opacity-0 translate-y-4","enter-to-class":"opacity-100 translate-y-0","leave-from-class":"opacity-100 translate-y-0","leave-to-class":"opacity-0 -translate-y-4"},{default:G(()=>[(k(),_("p",{key:h(g),class:"w-[calc(100%-2rem)] truncate pl-4 text-left text-sm font-normal text-neutral-500 sm:pl-10 sm:text-base dark:text-zinc-500"},J(t.placeholders[h(g)]),1))]),_:1},512),[[Q,!l.value]])])],34))}});export{le as _};
