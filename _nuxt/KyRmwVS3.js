import{e as N,r as h,b as x,aa as j,f as o,h as m,j as v,n as u,N as L,m as g,Q as M,l as p,F as V,G as $,H as F,u as a,p as I,I as S,T,ag as k,ah as U,a6 as A}from"./C9QOXPtL.js";const E={key:0,class:"fixed inset-0 z-[100] flex size-full items-center justify-center backdrop-blur-2xl"},G={class:"relative h-96"},H={class:"relative mx-auto mt-40 flex max-w-xl flex-col justify-start"},Q={class:"flex flex-col"},Y={key:0,class:"mt-1 text-sm text-gray-500 dark:text-gray-400"},J=N({__name:"MultiStepLoader",props:{steps:{},loading:{type:Boolean,default:!1},defaultDuration:{default:1500},preventClose:{type:Boolean,default:!1}},emits:["state-change","complete","close"],setup(z,{emit:C}){const n=z,d=C,e=h(0),_=h(Date.now()),c=h(!1);let l=null;async function D(t){typeof t.action=="function"&&await t.action()}async function b(){const t=n.steps[e.value];t&&(await D(t),e.value<n.steps.length-1?(e.value++,_.value=Date.now(),d("state-change",e.value),w()):(c.value=!0,d("complete")))}async function w(){l&&clearTimeout(l);const t=n.steps[e.value];if(!t)return;const r=t.duration||n.defaultDuration;t.async||(l=setTimeout(()=>{b()},r))}function B(){d("close")}return x(()=>{var t;return(t=n.steps[e.value])==null?void 0:t.async},async(t,r)=>{if(t===!1&&r===!0){const i=n.steps[e.value];if(!i)return;const y=i.duration||n.defaultDuration;l=setTimeout(()=>{b()},y)}}),x(()=>n.loading,t=>{t?(e.value=0,_.value=Date.now(),c.value=!1,w()):l&&clearTimeout(l)}),j(()=>{l&&clearTimeout(l)}),(t,r)=>{const i=U,y=A;return o(),m(T,{"enter-active-class":"transition-opacity duration-300","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition-opacity duration-300","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:v(()=>[t.loading&&t.steps.length>0?(o(),u("div",E,[L(g(y,{class:"absolute right-4 top-4 z-[101] bg-primary",size:"sm",onClick:B},{default:v(()=>[g(i,{name:"mdi:close",class:"size-6"})]),_:1},512),[[M,!t.preventClose]]),p("div",G,[p("div",H,[(o(!0),u(V,null,$(t.steps,(f,s)=>(o(),u("div",{key:s},[f?(o(),u("div",{key:0,class:"mb-4 flex items-center gap-2 text-left transition-all duration-300 ease-in-out",style:F({opacity:s===a(e)?1:Math.max(1-Math.abs(s-a(e))*.2,0),transform:`translateY(${s===a(e)?-(a(e)*40):-(a(e)*40)}px)`})},[s<a(e)||s===t.steps.length-1&&s===a(e)&&a(c)?(o(),m(i,{key:0,size:24,name:"i-heroicons-check-circle-solid",class:"text-primary"})):s===a(e)&&(!a(c)||s!==t.steps.length-1)?(o(),m(i,{key:1,size:24,name:"i-heroicons-arrow-path",class:"animate-spin text-primary"})):(o(),m(i,{key:2,size:24,name:"i-heroicons-check-circle",class:"text-black opacity-50 dark:text-white"})),p("div",Q,[p("span",{class:I(["text-lg text-black dark:text-white",s>a(e)&&"opacity-50"])},S(f.text),3),g(T,{"enter-active-class":"transition-all duration-300","enter-from-class":"opacity-0 -translate-y-1","enter-to-class":"opacity-100 translate-y-0"},{default:v(()=>[f.afterText&&(s<a(e)||s===t.steps.length-1&&s===a(e)&&a(c))?(o(),u("span",Y,S(f.afterText),1)):k("",!0)]),_:2},1024)])],4)):k("",!0)]))),128))])]),r[0]||(r[0]=p("div",{class:"absolute inset-x-0 bottom-0 z-20 h-full bg-white bg-gradient-to-t [mask-image:radial-gradient(900px_at_center,transparent_30%,white)] dark:bg-black"},null,-1))])):k("",!0)]),_:1})}}});export{J as _};
